#!/bin/bash

DIR="$PWD"
YAY=(
  "cliphist"
  "fcitx5"
  "fcitx5-configtool"
  "fcitx5-mozc"
  "grim"
  "hyprpaper"
  "hyprpicker"
  "libnotify"
  "man"
  "npm"
  "pacman-contrib"
  "pcmanfm"
  "pulseaudio"
  "python-pywal16"
  "ripgrep"
  "slurp"
  "swappy"
  "swaync"
  "unzip"
  "waybar"
  "wl-copy"
  "wofi"
  "zen-browser-bin"
)
FONT=(
  "nerd-fonts"
  "noto-fonts-cjk" 
  "noto-fonts-emoji" 
  "ttf-font-awesome"
  "ttf-hack-nerd"
  "ttf-icomoon-feather"
  "ttf-iosevka-nerd"
  "ttf-jetbrains-mono-nerd"
)
WALLHAVEN=(
  "https://w.wallhaven.cc/full/8o/wallhaven-8opwv2.png" # Arisu
  "https://w.wallhaven.cc/full/2y/wallhaven-2yv5m6.png" # Arisu
  "https://w.wallhaven.cc/full/5g/wallhaven-5gyjw3.jpg" # Arisu
  "https://w.wallhaven.cc/full/9d/wallhaven-9d612x.png" # Mari
  "https://w.wallhaven.cc/full/rr/wallhaven-rrep8j.jpg" # Momoi
  "https://w.wallhaven.cc/full/p9/wallhaven-p9xqpm.jpg" # Momoi & Midori
  "https://w.wallhaven.cc/full/we/wallhaven-wel3l7.jpg" # Momoi & Midori
  "https://w.wallhaven.cc/full/l8/wallhaven-l86ykp.jpg" # Arisu, Yuzu, Momoi & Midori
)
CONF=(
  ".bashrc"
  ".gitconfig"
  ".config/"
  ".local/"
)

check_yay() {
  if [[ ! -f /usr/bin/yay ]]; then
    pushd /tmp/
    git clone https://aur.archlinux.org/yay.git
    pushd /tmp/yay/
    makepkg -si
    popd && popd
  fi
}

install_yay() {
  for package in "${YAY[@]}"; do
    yay -S --noconfirm "${package}"
  done

  for font in "${FONT[@]}"; do
    yay -S --noconfirm "${font}"
  done
}

wallpaper() {
  for url in "${WALLHAVEN[@]}"; do
    curl -O --output-dir $HOME/Pictures/ "${url}"
  done
}

copy_mod() {
  for copy in "${CONF[@]}";do
    cp -r "${DIR}/${copy}" $HOME/
  done
  chmod +x $HOME/.local/bin*
}

neovim() {
  git clone https://github.com/MuteSTEVE/nvim.git $HOME/.config/nvim/
}

main() {
  check_yay
  install_yay
  copy_mod
  wallpaper
  neovim
}

main
